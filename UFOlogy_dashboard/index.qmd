---
title: "It's a bird, it's a plane - no it's a UFO!"
format:
  dashboard:
    scrolling: true
author: Git Culture
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F)

# Replace root directory path with wherever github repo is locally stored for user
knitr::opts_knit$set(root.dir = "/users/jacquelineferri/Desktop/sppw/biostats777-final-project-git-culture/")

library(dplyr)
library(ggplot2)
library(lubridate)
library(readr)
library(ggridges)
library(wordcloud)
library(tm)
library(stringr)
library(png)
library(grid)
library(tidyverse)
library(leaflet)
library(leaflet.extras)
library(sf)
library(tigris)
```

# Home

**Welcome to the UFOlogy Dashboard!**

This dashboard provides the opportunity to explore supernatural sightings and their associations with weather patterns and potential years of life lost across California counties.

This dashboard was created by Sonia Dhawan, Ananya Bhaktaram, Jacqueline Ferri and Curtis Ehlert in fulfillment of Project 4 for PH.140.777, Statistical Programming Paradigms and Workflows at the Johns Hopkins Bloomberg School of Public Health.

::: {.callout-warning}
## Warning: This dashboard does not represent real scientific findings!

This dashboard was created in December 2025 as a practice of programmatic skills learned in PH.140.777 and does not represent real scientific insight into the credibility of UFO or Bigfoot sightings or any potential associations with health related phenomena.
:::

# Overview

## Dashboard Purpose

This interactive dashboard provides a unique perspective on supernatural phenomena in California by providing visualizing data on the following:

-   **UFO Sightings -** concentration and temporal trends of UFO reports

-   **Bigfoot Sightings -** geographic distributions of reported Bigfoot encounters

-   **Years of Potential Life Lost (YPLL) Rate -** temporal and geographic trends of YPLL rates

Our goal is to provide users the opportunity to explore interesting associations between the distribution of these phenomena and to delve into their geographic and temporal distributions across California's 58 counties.

### How to Use This Dashboard

1.  **Explore** data by using the tabs above to look at patterns across California throughout the years.
2.  **Compare** different trends to come to your own conclusions.
3.  **Download** data and R-code from our github repository to recreate our analysis for yourselves.

::: callout-tip
**Data Access**

Access raw data, analysis documentation, plot visualization code, and a complete bibliography of sites and sources used in the creation of this dashboard can be found on our Github.

Github Repository: <https://github.com/jferri3/biostats777-final-project-git-culture>
:::

### Data Sources

The data used in this dashboard came from the following sources:

-   **UFO sightings** were obtained from CORGIS scraped and cleaned data that was originally collected by National UFO Reporting Center

    -   This contained point level data of the site of reported UFO incident, as well as city, county, and type of observation from 2004-2014

-   **Bigfoot Data** scraped and cleaned data was obtained from Kaggle that was originally collected by the Bigfoot Field Researchers Organization.

    -   This contained documented Bigfoot sightings between 2004-2014 as well as State, County and date.

-   **Weather Data** was scraped from the National Oceanic and Atmospheric Administration (NOAA)

    -   We extracted monthly average precipitation, and monthly average temperature data for California counties between 2004-2014.

-   **YPLL** data came from the Robert Wood Johnson Foundations County Health Rankings

    -   This contained YPLL rates at the County level in California from 2010-2025

# Patterns of UFO Reports

### Overview

The National UFO Reporting Center (NUFORC) has documented over **158,526 UFO reports** between 1995-2018. The following analysis shows a **significant increase in UFO sightings over time**, with distinct, temporal, environmental and phenomenological differences.

The United States has the highest overall number of reported UFO sightings of any country in the world. Moreover, California has the highest concentration of reported UFO sightings of any state in the U.S. It's diverse, geography, climate, and combination of rural and urban areas provides an ideal location to explore how UFO reports may be influenced by a variety of factors.

### Note about Data

::: callout-note
The following data visualizations are based off of reported phenomenon documented and voluntarily submitted by witnesses to NUFORC. Consequently, the data should be interpreted as a behavioral response data based off of individual experiences rather than verified and confirmed extraterrestrial activity.
:::

### Key Findings

::: callout.tip
**Key Findings**

-   The number of UFO sightings in California have increased over time.

-   Seasonal variation - UFO sightings peak when the average monthly temperature is around 60 Â°F

-   UFOs were more likely to be reported being sighted at night

-   Variation by type - reports of "egg" shaped sightings had the longest duration, while "chevron", "fireball" and "rectangle" sightings had the shortest duration.
:::

## Temporal Analysis {height="25%"}

**The two charts below display the increased frequency of UFO reports over time in California between 2004-2014. The first graph displays the cumulative increase of UFO sightings over time and the graph in the second tab shows the distribution of UFO sightings over time by shape.**

### Graphs {.tabset}

#### Cumulative View

```{r, echo=FALSE}
ggplot2::ggplot() + ggplot2::annotation_raster(png::readPNG("plot-images/cumulative_sightings.png"), 0, 1, 0, 1) + ggplot2::theme_void()
```

#### By Shape

```{r, echo=FALSE, fig.show='asis'}
## quarto dashboard doesn't render the plot b/c it's html and isn't read as a figure. use ggplot OR wrap it in a grid to make it a figure object
grid::grid.raster(png::readPNG("plot-images/UFOsightings_time_space.png"))

```

:::: grid
::: g-col-6
### Day vs Night Sightings

**When do UFOs Appear?** Explore how time of day influences the likelihood of spotting a UFO.

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/day_night_UFOsightings.png"))
```
:::
::::

## Break to separate out Blocks 2 and 3

::: callout
**Seasonal Variation:**

The following graphs displays show seasonal variation in UFO sightings in California. Explore the differences in sightings based on average temperature, month, and season
:::

## Seasonal Variation {height="10%"}

### Graphs {.tabset}

#### Temperature Change

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/UFOsightings_temperature.png"))
```

#### Sightings by Month

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/monthly_sightings.png"))
```

#### Seasonal Variation

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/seasonal_sightings.png"))
```

:::: grid
::: g-col-6
## County Observations

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/top15_counties.png"))
```
:::
::::

:::: grid
::: g-col-6
## Duration

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/UFOencounter_duration_shape.png"))
```
:::
::::

# Supernatural Sightings & Weather

## UFO sightings, bigfoot, and precipitation

::: {layout-ncol="1"}
```{r, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
# Load and prepare data
df <- read_csv("datasets/nuforc_county_weather_bigfoot_with_census_population.csv") %>%
  mutate(
    County = str_trim(County),
    County = str_to_title(County),
    County = if_else(str_detect(County, "County$"), County, paste0(County, " County"))
  )

# Filter for California only
df_ca <- df %>% 
  filter(Location.State == "CA") %>%
  filter(!is.na(County), County != "")

ca_counties <- counties(state = "CA", cb = TRUE, class = "sf") %>%
  mutate(NAME = str_to_title(NAME)) %>%
  mutate(NAME = if_else(str_detect(NAME, "County$"), NAME, paste0(NAME, " County")))

# Clean county names in data
df_ca <- df_ca %>%
  mutate(County = if_else(str_detect(County, "County$"), County, paste0(County, " County")))

# County level data
county_precip <- df_ca %>%
  group_by(County) %>%
  summarize(Avg_Precip = mean(Avg_Precip_Month_County, na.rm = TRUE), .groups = "drop")

ufo_counts <- df_ca %>%
  filter(sighting_type == "UFO") %>%
  count(County, name = "UFO_Count")

bigfoot_counts <- df_ca %>%
  filter(sighting_type == "Bigfoot") %>%
  count(County, name = "Bigfoot_Count")

county_pop <- df_ca %>%
  group_by(County) %>%
  summarize(population = first(population), .groups = "drop")

# Combine all county data
county_data <- county_precip %>%
  left_join(county_pop, by = "County") %>%
  left_join(ufo_counts, by = "County") %>%
  left_join(bigfoot_counts, by = "County") %>%
  mutate(
    UFO_Count = replace_na(UFO_Count, 0),
    Bigfoot_Count = replace_na(Bigfoot_Count, 0),
    UFO_per_100k = if_else(!is.na(population) & population > 0, 
                           UFO_Count / population * 100000, NA_real_),
    Bigfoot_per_100k = if_else(!is.na(population) & population > 0, 
                               Bigfoot_Count / population * 100000, NA_real_)
  )

# Map making
ca_map <- ca_counties %>%
  left_join(county_precip, by = c("NAME" = "County"))

#Blue color for precipitation
precip_pal <- colorNumeric("Blues", domain = county_data$Avg_Precip, na.color = "#f0f0f0")

# Create base map
orig_map <- leaflet() %>%
  addProviderTiles("CartoDB.Positron") %>%
  addPolygons(
    data = ca_map,
    fillColor = ~precip_pal(Avg_Precip),
    fillOpacity = 0.6,
    color = "white",
    weight = 1,
    smoothFactor = 0.3,
    group = "Precipitation Map",
    label = ~paste0(NAME, ": ", ifelse(is.na(Avg_Precip), "No data", 
                                       paste0(round(Avg_Precip, 2), " in")))
  ) %>%
  addLegend(
    "bottomleft",
    pal = precip_pal,
    values = county_data$Avg_Precip,
    title = "Avg Monthly Precipitation (in)",
    na.label = "No data"
  )

# Add UFO heatmap and points
ufo_data <- df_ca %>% filter(sighting_type == "UFO", !is.na(lon), !is.na(lat))
orig_map <- orig_map %>%
  addHeatmap(
    data = ufo_data,
    lng = ~lon, lat = ~lat,
    radius = 25,
    blur = 30,
    max = 0.01,
    group = "UFO Heatmap"
  ) %>%
  addCircleMarkers(
    data = ufo_data,
    lng = ~lon, lat = ~lat,
    radius = 3,
    color = "blue",
    fillOpacity = 0.7,
    label = ~paste("UFO in", County),
    group = "UFO Points"
  )

# Adding Bigfoot heatmap and points
bigfoot_data <- df_ca %>% filter(sighting_type == "Bigfoot", !is.na(lon), !is.na(lat))
orig_map <- orig_map %>%
  addHeatmap(
    data = bigfoot_data,
    lng = ~lon, lat = ~lat,
    radius = 25,
    blur = 30,
    max = 0.01,
    group = "Bigfoot Heatmap",
    gradient = c("0" = "black", "0.3" = "red", "0.7" = "orange", "1" = "yellow")
  ) %>%
  addCircleMarkers(
    data = bigfoot_data,
    lng = ~lon, lat = ~lat,
    radius = 3,
    color = "red",
    fillOpacity = 0.7,
    label = ~paste("Bigfoot in", County),
    group = "Bigfoot Points"
  ) %>%
  addLayersControl(
    baseGroups = c("Precipitation Map"),
    overlayGroups = c("UFO Heatmap", "Bigfoot Heatmap", "UFO Points", "Bigfoot Points"),
    options = layersControlOptions(collapsed = FALSE)
  )
```

```{r, echo=FALSE}
orig_map
```
:::

## card for Curtis' lovely scatterplots

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/plot_bigfoot_vs_ufo.png"))
```
## 
**UFO vs. Bigfoot plot per capita (log -transformed):** Correlation is observed between county Bigfoot and UFO sightings per capita when log-transformed

## break between cards

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/plot_ufo_vs_precip.png"))
```
## 
**Precipitation vs UFO plot per capita:** Little correlation is observed between county precipitation and UFO sightings, per capita


## break between cards
```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/plot_bigfoot_vs_ufo_percap.png"))
```
## 
**Bigfoot vs UFO plot per capita:** Correlation is observed, but outliers inflate findings.


## break between cards
```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/plot_ufo_vs_precip_percap.png"))
```

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/plot_log_bigfoot_vs_ufo.png"))
```

# Health Data

**Years of Potential Life Lost vs. Weather Trends**

##  {.tabset}

### YPLL

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/YPLL_plot.png"))
```

### Precipitation

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/precip_plot.png"))
```

### Temperature

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/temp_plot.png"))
```

## page break between tabset cards

**Years of Potential Life Lost vs. UFO Sightings by County over the Years**

##  {.tabset}

### YPLL

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/YPLL_plot.png"))
```

### 2004

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/sightings_2004_plot.png"))

```

### 2007

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/sightings_2007_plot.png"))

```

### 2009

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/sightings_2009_plot.png"))

```

### 2011

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/sightings_2011_plot.png"))

```

### 2013

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/sightings_2013_plot.png"))

```

### 2014

```{r, echo=FALSE}
grid::grid.raster(png::readPNG("plot-images/sightings_2014_plot.png"))
```

## page break after tabs

# Machine Learning 

**Title:** Machine Learning Workflow: Data-to-Model Paradigm to Predict UFO Sightings (Counts and Average Duration) At the County Level in California

**Data collection:** We used a functional programming paradigm to read in and wrangle the data, summarizing monthly average sighting duration and total sighting count for each county in California from January 2004-December 2014, along with the average temperature and average precipitation.

**Feature engineering:** We encoded a categorical variable for season, in order to assess whether the outcomes of interest are more impacted by linear time or by season.

**Model training and evaluation:** After removing missing data and outliers, we 80/20 split our data into a training data set and a test data set. We then trained two random forest models for each outcome of interest: average sighting duration and total number of sightings per county per month from January 2004 to December 2014. Each of the two random forest models incorporated a different time metric (month/year or season).

* Model 1: Average sighting duration = year + month + county + average temperature + average precipitation + total number of sightings

* Model 2:  Average sighting duration = season + county + average temperature + average precipitation + total number of sightings 

* Model 3: Total number of sightings = year + month + county + average temperature + average precipitation

* Model 4: Total number of sightings = season + county + average temperature + average precipitation

We only include total sighting count as a predictor for average sighting duration (not vice versa) to account for the fact that very high outliers in the average sighting duration data might be the result of low counts that are also highly inaccurate. Most of the outliers for the average sighting duration data were based on one sighting.

**Model deployment:** After training the models, we then tested them. The accuracy metrics are listed in the table. We ran one linear regression model for each outcome (using season as the time metric since those models were slightly more accurate than the ones that used month and year as the time metric) just to see if there would be a notable difference. 

##

```{r, echo=FALSE}
#| title: "**Results:**"

grid::grid.raster(png::readPNG("plot-images/Metrics_table.png"))
```
##

**Discussion:** For each outcome, all three models were similar in terms of accuracy, which tells us that linear regression is probably the way to go; random forest probably would likely lead to overfitting. 

All three models were not very accurate for the average sighting duration outcome, accounting for only ~0.3-0.5% of the variation in the outcome. 

The model was more accurate for the sighting count outcome, accounting for ~50% of the variation in the outcome. The random forest model that incorporated season had more predictive accuracy for sighting count than the model that used the month and year time metric. The RMSE tells us that the linear model's predictions of total monthly sightings are, on average, about 1.36 counts off from the truth.

# Analysis & Interpretation

## Supernatural Patterns & Key Findings

### Large Number of UFO Sightings Concentrated in LA County

Los Angeles County had by far the highest number of UFO sightings with more than 800 reports between 2004 and 2014. Given that the next county with the second largest number of sightings (San Diego) had nearly half the amount of reported sightings, its possible that the out sized number of UFO sightings in LA County might be due to the location of SpaceX. SpaceX was headquartered in Hawthorne, California between 2002 and 2024, which is located in Southwestern LA County. In 2024, SpaceX moved its headquarters to be located outside of Brownsville, TX. SpaceX began testing the Falcon 1 rocket in March of 2006, before successful launch the Falcon 1 in September of 2008. It's possible that the increased number of UFO sightings in LA County could be at least partially associated with repeated tests and launches from SpaceX, which overlap with our study period (2004-2010). The number of reported sightings begins to be more heavily concentrated in the Southern portion of the state from 2007 onward which is consistent with when SpaceX began their Falcon 1 tests.

### Bigfoot Sightings Clustered in Northern half of the State

Given the known habit of Bigfoot, temperate forests, it makes sense that the vast majority of Bigfoot sightings are concentrated in the Northern, forested parts of the state. Particularly in State and National parks like the Redwoods, and Yosemite.

### Weather Variation

There appears to be a consistent association across our study period with dryer, warmer areas of the state (the Southern part of the state) with higher numbers of UFO sightings. Dryer, warmer nights often mean clearer nights and increased visibility compared to cooler foggier parts of the state where visibility might be limited. The combination of increased visibility alongside the location of both private and governement launch and testing sites (e.g. SpaceX, Northrup-Grumman, and Vandenberg Airforce Base, among others) could help explain why the majority of UFO sightings are clustered in the Southern part of the state.

## Health Data

There does not appear to be a substantiated association with the locations of either UFO or Bigfoot sightings and years of potential life lost rates in California counties between 2004 and 2014. Rather counties with high YPLL rates appeared to be counties that were more likely to be rural suggesting that the patterning of YPLL assessments is likely to be associated with other social determinants of health. Future studies ought to examine how social determinants of health, particularly factors relating to disinvestment in rural areas are likely to impact access to care. Additionally, the funneling of resources and economic opportunities toward urban hubs like San Francisco, Los Angeles, Sacramento, and San Diego may be creating unintentional consequences for rural counties surrounding them which have historically employed lots of migrant workers on farms who are likely to be marginalized and vulnerable.